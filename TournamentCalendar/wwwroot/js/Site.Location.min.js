var Site;(Site=void 0===Site?{}:Site).Location=class{"use strict";constructor(e,t,i,s,n,a){this.countryIdEle=document.getElementById(e),this.countryIdEle.addEventListener("change",this.update.bind(this),!1),this.zipCodeEle=document.getElementById(t),this.zipCodeEle.addEventListener("change",this.update.bind(this),!1),this.zipCodeEle.addEventListener("change",function(e){this.value=this.value.trim()}),this.cityEle=document.getElementById(i),this.cityEle.addEventListener("change",this.update.bind(this),!1),this.cityEle.addEventListener("change",function(e){this.value=this.value.trim()}),this.streetEle=document.getElementById(s),this.streetEle.addEventListener("change",this.update.bind(this),!1),this.streetEle.addEventListener("change",function(e){this.value=this.value.trim()}),this.btnMapModalEle=document.getElementById(n),this.mapPlaceholderEle=document.getElementById(a),this.geocoder=new google.maps.Geocoder,setInterval(this.enableDisableModalButton.bind(this),500)}get addressElements(){return[this.countryIdEle,this.zipCodeEle,this.cityEle,this.streetEle]}enableDisableModalButton(){this.isAddressEntered?(this.btnMapModalEle.removeAttribute("disabled"),this.btnMapModalEle.style.cursor="pointer",this.btnMapModalEle.style.pointerEvents="auto"):(this.btnMapModalEle.setAttribute("disabled","disabled"),this.btnMapModalEle.style.cursor="not-allowed",this.btnMapModalEle.style.pointerEvents="all")}update(){this.enableDisableModalButton(),this.isAddressEntered&&this.showHideLocation()}get isAddressEntered(){return 3<=this.getAddress(!1).length}getAddress(e){var t=(this.zipCodeEle.value.trim()+" "+this.cityEle.value.trim()+" "+this.streetEle.value.trim()).trim();return e?(this.countryIdEle.value.trim()+" "+t).trim():t}arrayEquals(e,i){return Array.isArray(e)&&Array.isArray(i)&&e.length===i.length&&e.every((e,t)=>e===i[t])}showHideLocation(){this.mapPlaceholderEle.innerHTML='<div style="padding: 1rem; color: gray">Die Karte wird gezeigt,<br />wenn die Adresse gefunden wurde.</div>',this.isAddressEntered&&this.getLocation().then(e=>this.showLocationOnGoogleMaps(e[0],e[1])).catch()}async getLocation(){var e=this.getAddress(!0),e=(await this.geocoder.geocode({address:e})).results;if(Array.isArray(e))return[e[0].geometry.location.lat(),e[0].geometry.location.lng()];throw new Error("Error getting location from Google")}showLocationOnGoogleMaps(e,t){e=new google.maps.LatLng(e,t),t={zoom:14,center:e,mapTypeControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},t=new google.maps.Map(this.mapPlaceholderEle,t);new google.maps.Marker({position:e,map:t,title:"Angegebener Standort"})}};